---
// Contact.astro - Simplified contact landing page with reCAPTCHA
import theme from '../../lib/theme';

export interface Props {
  // Hero content
  headline?: string;
  subheadline?: string;
  guarantee?: string;
  
  // reCAPTCHA configuration
  recaptchaSiteKey?: string;
  
  // Services section
  services?: Array<{
    title: string;
    description: string;
    bestFor: string;
  }>;
  
  // Testimonials
  testimonials?: Array<{
    quote: string;
    author: string;
    title: string;
    company: string;
    avatar?: string;
  }>;
  
  // Contact methods
  contactMethods?: Array<{
    title: string;
    value: string;
    href: string;
    available: string;
  }>;
}

const {
  headline = "Ready to Transform Your Website?",
  subheadline = "Let's start with a conversation",
  guarantee = "Free consultation • No obligation • 24-hour response guaranteed",
  recaptchaSiteKey = "YOUR_RECAPTCHA_SITE_KEY", // Replace with your actual site key
  services = [
    {
      title: "WordPress Migration",
      description: "Seamless migration with zero downtime and performance optimization",
      bestFor: "Sites moving from old hosting or outdated WordPress versions"
    },
    {
      title: "Performance Audit", 
      description: "Complete analysis of speed, SEO, and user experience issues",
      bestFor: "Slow sites needing optimization and better search rankings"
    },
    {
      title: "Hosting Consultation",
      description: "Find the perfect hosting solution for your traffic and budget",
      bestFor: "Growing businesses outgrowing current hosting limitations"
    },
    {
      title: "Ongoing Support",
      description: "Monthly maintenance, updates, security, and performance monitoring",
      bestFor: "Busy business owners who want peace of mind and reliable uptime"
    }
  ],
  testimonials = [
    {
      quote: "The migration was flawless and our site is 3x faster now. Best investment we made this year.",
      author: "Sarah Chen",
      title: "Marketing Director",
      company: "TechGear Pro"
    },
    {
      quote: "They delivered exactly what they promised, on time and within budget. Highly recommend.",
      author: "Mike Rodriguez", 
      title: "CEO",
      company: "Local Fitness Co"
    }
  ],
  contactMethods = [
    {
      title: "Schedule Free Consultation",
      value: "Book 30-min strategy call",
      href: "https://calendly.com/youragency/consultation",
      available: "Available Mon-Fri, 9AM-5PM EST"
    },
    {
      title: "Email Us Directly",
      value: "hello@youragency.com",
      href: "mailto:hello@youragency.com", 
      available: "24-hour response guaranteed"
    },
    {
      title: "Call Us",
      value: "+1 (555) 123-4567",
      href: "tel:+15551234567",
      available: "Mon-Fri, 9AM-6PM EST"
    }
  ]
} = Astro.props;
---

<!-- reCAPTCHA Script -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<main class="contact-page">
  <!-- Hero Banner -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1 class="headline">{headline}</h1>
        <p class="subheadline">{subheadline}</p>
        <div class="guarantee">{guarantee}</div>
        
        <div class="hero-cta">
          <a href="#contact-form" class="btn btn-primary">Start Free Consultation</a>
          <a href="#audit-form" class="btn btn-secondary">Get Free Website Audit</a>
        </div>
      </div>
    </div>
  </section>

  <!-- How We Can Help -->
  <section class="services">
    <div class="container">
      <h2 class="section-title">How We Can Help You</h2>
      
      <div class="services-grid">
        {services.map((service, index) => (
          <div class="service-card" key={index}>
            <h3 class="service-title">{service.title}</h3>
            <p class="service-description">{service.description}</p>
            <div class="best-for">
              <strong>Best for:</strong> {service.bestFor}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Testimonial -->
  <section class="testimonial-section">
    <div class="container">
      <div class="testimonial">
        <blockquote class="quote">"{testimonials[0].quote}"</blockquote>
        <div class="author">
          <div class="author-info">
            <div class="name">{testimonials[0].author}</div>
            <div class="title">{testimonials[0].title}, {testimonials[0].company}</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Free Website Audit Form -->
  <section class="audit-section" id="audit-form">
    <div class="container">
      <div class="audit-content">
        <div class="audit-text">
          <h2>Start Here: Free Website Audit</h2>
          <p>Get your performance score and migration roadmap in 48 hours</p>
          <ul class="audit-benefits">
            <li>Performance analysis and speed recommendations</li>
            <li>SEO audit with improvement opportunities</li>
            <li>Security scan and vulnerability report</li>
            <li>Custom migration strategy if needed</li>
          </ul>
        </div>
        
        <form class="audit-form" name="website-audit" method="POST" action="/api/audit-form">
          
          <div class="form-group">
            <label for="website-url" class="form-label">Your Website URL *</label>
            <input 
              type="url" 
              id="website-url" 
              name="websiteUrl" 
              class="form-input" 
              placeholder="https://yourwebsite.com"
              required 
            />
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="audit-name" class="form-label">Name *</label>
              <input 
                type="text" 
                id="audit-name" 
                name="name" 
                class="form-input" 
                required 
              />
            </div>
            
            <div class="form-group">
              <label for="audit-email" class="form-label">Email *</label>
              <input 
                type="email" 
                id="audit-email" 
                name="email" 
                class="form-input" 
                required 
              />
            </div>
          </div>
          
          <!-- reCAPTCHA -->
          <div class="form-group">
            <div class="g-recaptcha" data-sitekey={recaptchaSiteKey}></div>
          </div>
          
          <button type="submit" class="btn btn-primary full-width">
            Get My Free Audit Report
          </button>
          
          <p class="form-note">We'll email your detailed report within 48 hours</p>
        </form>
      </div>
    </div>
  </section>

  <!-- Contact Methods -->
  <section class="contact-methods">
    <div class="container">
      <h2 class="section-title">Get in Touch</h2>
      
      <div class="methods-grid">
        {contactMethods.map((method, index) => (
          <a href={method.href} class="method-card" key={index}>
            <h3 class="method-title">{method.title}</h3>
            <div class="method-value">{method.value}</div>
            <div class="method-available">{method.available}</div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Main Contact Form -->
  <section class="contact-form-section" id="contact-form">
    <div class="container">
      <div class="form-content">
        <div class="form-text">
          <h2>Tell Us About Your Project</h2>
          <p>The more details you provide, the better we can help you achieve your goals.</p>
        </div>

        <form class="contact-form" name="contact" method="POST" data-netlify="true">
          <input type="hidden" name="form-name" value="contact" />
          
          <div class="form-row">
            <div class="form-group">
              <label for="first-name" class="form-label">First Name *</label>
              <input 
                type="text" 
                id="first-name" 
                name="firstName" 
                class="form-input" 
                required 
              />
            </div>
            
            <div class="form-group">
              <label for="last-name" class="form-label">Last Name *</label>
              <input 
                type="text" 
                id="last-name" 
                name="lastName" 
                class="form-input" 
                required 
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email" class="form-label">Email *</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                required 
              />
            </div>
            
            <div class="form-group">
              <label for="phone" class="form-label">Phone</label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                class="form-input" 
              />
            </div>
          </div>

          <div class="form-group">
            <label for="current-website" class="form-label">Current Website</label>
            <input 
              type="url" 
              id="current-website" 
              name="currentWebsite" 
              class="form-input" 
              placeholder="https://"
            />
          </div>

          <div class="form-group">
            <label for="project-type" class="form-label">What do you need help with? *</label>
            <select id="project-type" name="projectType" class="form-select" required>
              <option value="">Select a service</option>
              <option value="wordpress-migration">WordPress Migration</option>
              <option value="performance-optimization">Performance Optimization</option>
              <option value="hosting-consultation">Hosting Consultation</option>
              <option value="ongoing-support">Ongoing Support & Maintenance</option>
              <option value="website-redesign">Website Redesign</option>
              <option value="seo-audit">SEO Audit & Optimization</option>
              <option value="consultation">General Consultation</option>
            </select>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="budget" class="form-label">Budget Range</label>
              <select id="budget" name="budget" class="form-select">
                <option value="">Select budget</option>
                <option value="under-5k">Under $5,000</option>
                <option value="5k-15k">$5,000 - $15,000</option>
                <option value="15k-30k">$15,000 - $30,000</option>
                <option value="30k-plus">$30,000+</option>
                <option value="not-sure">Not sure yet</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="timeline" class="form-label">Timeline</label>
              <select id="timeline" name="timeline" class="form-select">
                <option value="">Select timeline</option>
                <option value="asap">ASAP (1-2 weeks)</option>
                <option value="1-month">Within 1 month</option>
                <option value="2-3-months">2-3 months</option>
                <option value="flexible">Flexible</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="project-details" class="form-label">Tell us about your project *</label>
            <textarea 
              id="project-details" 
              name="projectDetails" 
              rows="5" 
              class="form-textarea" 
              placeholder="Describe your current challenges, goals, and what you're hoping to achieve..."
              required
            ></textarea>
          </div>

          <button type="submit" class="btn btn-primary full-width">
            Send My Project Details
          </button>
        </form>
      </div>
    </div>
  </section>

  <!-- What Happens Next -->
  <section class="process">
    <div class="container">
      <h2 class="section-title">What Happens Next</h2>
      <p class="section-subtitle">Our consultation process: from initial contact to project completion</p>
      
      <div class="process-steps">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3>Free Audit</h3>
            <p>We analyze your current website performance, security, and optimization opportunities</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3>Strategy Call</h3>
            <p>30-minute consultation to discuss findings and create a custom roadmap for your goals</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3>Custom Proposal</h3>
            <p>Detailed project proposal with timeline, deliverables, and transparent pricing</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">4</div>
          <div class="step-content">
            <h3>Migration Plan</h3>
            <p>Step-by-step execution with regular updates and zero-downtime guarantee</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final Testimonial -->
  <section class="final-testimonial">
    <div class="container">
      <div class="testimonial">
        <blockquote class="quote">"{testimonials[1].quote}"</blockquote>
        <div class="author">
          <div class="author-info">
            <div class="name">{testimonials[1].author}</div>
            <div class="title">{testimonials[1].title}, {testimonials[1].company}</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="final-cta">
    <div class="container">
      <h2>Ready to Get Started?</h2>
      <p>Book your free consultation and get your website transformation roadmap</p>
      <a href="https://calendly.com/youragency/consultation" class="btn btn-primary large">
        Book Your Free Consultation
      </a>
      <p class="cta-note">Available Mon-Fri • 24-hour response guaranteed</p>
    </div>
  </section>
</main>

<style define:vars={{
  // Theme integration
  primaryColor: theme.colors.primary[500],
  primaryHover: theme.colors.primary[600],
  primaryLight: theme.colors.primary[100],
  successColor: theme.colors.success[500],
  neutralWhite: theme.colors.neutral[50],
  neutralGray: theme.colors.neutral[500],
  neutralDark: theme.colors.neutral[900],
  neutralLight: theme.colors.neutral[100],
  borderColor: theme.colors.border,
  
  // Typography
  fontSans: theme.typography.fontFamily.sans.join(', '),
  fontDisplay: theme.typography.fontFamily.display.join(', '),
  
  // Spacing
  spacing2: theme.spacing[2],
  spacing3: theme.spacing[3],
  spacing4: theme.spacing[4],
  spacing6: theme.spacing[6],
  spacing8: theme.spacing[8],
  spacing12: theme.spacing[12],
  spacing16: theme.spacing[16],
  spacing20: theme.spacing[20],
  spacing24: theme.spacing[24],
  
  // Border radius
  borderRadiusLg: theme.borderRadius.lg,
  borderRadius2xl: theme.borderRadius['2xl'],
  
  // Shadows
  shadowMd: theme.boxShadow.md,
  shadowLg: theme.boxShadow.lg,
  
  // Accessibility
  touchTargetMin: theme.accessibility.touchTarget.min,
  focusColor: theme.accessibility.focus.color
}}>
  /* Base Styles */
  .contact-page {
    font-family: var(--fontSans);
    line-height: 1.6;
    color: var(--neutralDark);
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--spacing4);
  }

  @media (min-width: 768px) {
    .container {
      padding: 0 var(--spacing6);
    }
  }

  /* Section Styles */
  section {
    padding: var(--spacing20) 0;
  }

  .section-title {
    font-family: var(--fontDisplay);
    font-size: 2.5rem;
    font-weight: 700;
    text-align: center;
    margin: 0 0 var(--spacing4) 0;
  }

  .section-subtitle {
    font-size: 1.25rem;
    text-align: center;
    color: var(--neutralGray);
    margin: 0 0 var(--spacing12) 0;
  }

  /* Hero Section */
  .hero {
    background: linear-gradient(135deg, var(--primaryColor) 0%, #0f172a 100%);
    color: var(--neutralWhite);
    text-align: center;
  }

  .hero-content {
    max-width: 800px;
    margin: 0 auto;
  }

  .headline {
    font-family: var(--fontDisplay);
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 800;
    line-height: 1.1;
    margin: 0 0 var(--spacing6) 0;
  }

  .subheadline {
    font-size: 1.5rem;
    margin: 0 0 var(--spacing4) 0;
    opacity: 0.9;
  }

  .guarantee {
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--borderRadiusLg);
    padding: var(--spacing3) var(--spacing6);
    font-weight: 600;
    margin: 0 0 var(--spacing8) 0;
    backdrop-filter: blur(10px);
  }

  .hero-cta {
    display: flex;
    gap: var(--spacing4);
    justify-content: center;
    flex-wrap: wrap;
  }

  /* Button Styles */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing2);
    min-height: var(--touchTargetMin);
    padding: var(--spacing3) var(--spacing6);
    border: 2px solid transparent;
    border-radius: var(--borderRadiusLg);
    font-family: var(--fontSans);
    font-size: 1rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .btn:focus-visible {
    outline: 3px solid var(--focusColor);
    outline-offset: 2px;
  }

  .btn-primary {
    background: var(--primaryColor);
    border-color: var(--primaryColor);
    color: var(--neutralWhite);
  }

  .btn-primary:hover {
    background: var(--primaryHover);
    border-color: var(--primaryHover);
    transform: translateY(-2px);
  }

  .btn-secondary {
    background: transparent;
    border-color: var(--neutralWhite);
    color: var(--neutralWhite);
  }

  .btn-secondary:hover {
    background: var(--neutralWhite);
    color: var(--primaryColor);
  }

  .btn.large {
    font-size: 1.25rem;
    padding: var(--spacing4) var(--spacing8);
  }

  .btn.full-width {
    width: 100%;
  }

  /* Services Section */
  .services {
    background: var(--neutralLight);
  }

  .services-grid {
    display: grid;
    gap: var(--spacing6);
    grid-template-columns: 1fr;
  }

  @media (min-width: 768px) {
    .services-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .service-card {
    background: var(--neutralWhite);
    padding: var(--spacing6);
    border-radius: var(--borderRadius2xl);
    box-shadow: var(--shadowMd);
    border: 1px solid var(--borderColor);
    text-align: left;
  }

  .service-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin: 0 0 var(--spacing3) 0;
    color: var(--primaryColor);
  }

  .service-description {
    margin: 0 0 var(--spacing4) 0;
    line-height: 1.6;
  }

  .best-for {
    font-size: 0.9rem;
    color: var(--neutralGray);
    background: var(--neutralLight);
    padding: var(--spacing2) var(--spacing3);
    border-radius: var(--borderRadiusLg);
  }

  /* Testimonial Styles */
  .testimonial-section {
    background: var(--primaryLight);
  }

  .testimonial {
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
  }

  .quote {
    font-family: var(--fontDisplay);
    font-size: 1.5rem;
    font-style: italic;
    margin: 0 0 var(--spacing6) 0;
    color: var(--neutralDark);
  }

  .author-info {
    text-align: center;
  }

  .name {
    font-weight: 600;
    margin-bottom: var(--spacing2);
  }

  .title {
    color: var(--neutralGray);
    font-size: 0.9rem;
  }

  /* Audit Section */
  .audit-section {
    background: var(--neutralWhite);
  }

  .audit-content {
    display: grid;
    gap: var(--spacing12);
    align-items: center;
  }

  @media (min-width: 1024px) {
    .audit-content {
      grid-template-columns: 1fr 1fr;
    }
  }

  .audit-text h2 {
    font-family: var(--fontDisplay);
    font-size: 2rem;
    margin: 0 0 var(--spacing4) 0;
  }

  .audit-text p {
    font-size: 1.25rem;
    color: var(--neutralGray);
    margin: 0 0 var(--spacing6) 0;
  }

  .audit-benefits {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .audit-benefits li {
    display: flex;
    align-items: center;
    gap: var(--spacing3);
    margin-bottom: var(--spacing3);
  }

  .audit-benefits li::before {
    content: '✓';
    background: var(--successColor);
    color: var(--neutralWhite);
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: bold;
    flex-shrink: 0;
  }

  /* Form Styles */
  .audit-form,
  .contact-form {
    background: var(--neutralLight);
    padding: var(--spacing8);
    border-radius: var(--borderRadius2xl);
    border: 1px solid var(--borderColor);
  }

  .form-group {
    margin-bottom: var(--spacing6);
    width: 100%;
  }

  .form-row {
    display: grid;
    gap: var(--spacing4);
    grid-template-columns: 1fr;
    margin-bottom: var(--spacing6);
  }

  .form-row:last-child {
    margin-bottom: 0;
  }

  @media (min-width: 640px) {
    .form-row {
      grid-template-columns: 1fr 1fr;
    }
  }

  .form-label {
    display: block;
    font-weight: 600;
    font-size: 0.95rem;
    margin-bottom: var(--spacing2);
    color: var(--neutralDark);
    line-height: 1.2;
  }

  .form-input,
  .form-select,
  .form-textarea {
    width: 100%;
    min-height: var(--touchTargetMin);
    padding: var(--spacing3) var(--spacing4);
    border: 1px solid var(--borderColor);
    border-radius: var(--borderRadiusLg);
    font-family: var(--fontSans);
    font-size: 1rem;
    line-height: 1.5;
    background: var(--neutralWhite);
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    box-sizing: border-box;
  }

  .form-textarea {
    min-height: 120px;
    resize: vertical;
    padding-top: var(--spacing3);
    padding-bottom: var(--spacing3);
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    outline: none;
    border-color: var(--primaryColor);
    box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
  }

  .form-input::placeholder,
  .form-textarea::placeholder {
    color: var(--neutralGray);
    opacity: 0.7;
  }

  .form-note {
    font-size: 0.9rem;
    color: var(--neutralGray);
    text-align: center;
    margin-top: var(--spacing4);
    margin-bottom: 0;
  }

  /* Contact Methods */
  .methods-grid {
    display: grid;
    gap: var(--spacing6);
    grid-template-columns: 1fr;
  }

  @media (min-width: 768px) {
    .methods-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .method-card {
    background: var(--neutralWhite);
    padding: var(--spacing6);
    border-radius: var(--borderRadius2xl);
    box-shadow: var(--shadowMd);
    border: 1px solid var(--borderColor);
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
    text-align: center;
  }

  .method-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadowLg);
  }

  .method-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin: 0 0 var(--spacing3) 0;
    color: var(--primaryColor);
  }

  .method-value {
    font-weight: 600;
    margin: 0 0 var(--spacing2) 0;
  }

  .method-available {
    font-size: 0.9rem;
    color: var(--neutralGray);
  }

  /* Contact Form Section */
  .contact-form-section {
    background: var(--neutralLight);
  }

  .form-content {
    max-width: 800px;
    margin: 0 auto;
  }

  .form-text {
    text-align: center;
    margin-bottom: var(--spacing8);
  }

  .form-text h2 {
    font-family: var(--fontDisplay);
    font-size: 2rem;
    margin: 0 0 var(--spacing4) 0;
  }

  .form-text p {
    font-size: 1.125rem;
    color: var(--neutralGray);
    margin: 0;
  }

  /* Fix for form spacing in contact section */
  .contact-form .form-row .form-group {
    margin-bottom: 0;
  }

  .contact-form .form-group:last-child {
    margin-bottom: 0;
  }

  /* Process Section */
  .process-steps {
    display: grid;
    gap: var(--spacing8);
    grid-template-columns: 1fr;
  }

  @media (min-width: 768px) {
    .process-steps {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .process-steps {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .step {
    text-align: center;
  }

  .step-number {
    width: 60px;
    height: 60px;
    background: var(--primaryColor);
    color: var(--neutralWhite);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
    margin: 0 auto var(--spacing4) auto;
  }

  .step-content h3 {
    font-size: 1.25rem;
    margin: 0 0 var(--spacing3) 0;
  }

  .step-content p {
    color: var(--neutralGray);
    line-height: 1.6;
  }

  /* Final Testimonial */
  .final-testimonial {
    background: var(--neutralLight);
  }

  /* Final CTA */
  .final-cta {
    background: var(--primaryColor);
    color: var(--neutralWhite);
    text-align: center;
  }

  .final-cta h2 {
    font-family: var(--fontDisplay);
    font-size: 2.5rem;
    margin: 0 0 var(--spacing4) 0;
  }

  .final-cta p {
    font-size: 1.25rem;
    margin: 0 0 var(--spacing8) 0;
    opacity: 0.9;
  }

  .cta-note {
    font-size: 0.9rem;
    margin-top: var(--spacing4) !important;
    opacity: 0.8;
  }

  /* Mobile Optimizations */
  @media (max-width: 640px) {
    section {
      padding: var(--spacing12) 0;
    }

    .section-title {
      font-size: 2rem;
    }

    .hero-cta {
      flex-direction: column;
      align-items: center;
    }

    .btn {
      width: 100%;
      max-width: 300px;
    }

    .services-grid,
    .methods-grid,
    .process-steps {
      grid-template-columns: 1fr;
    }

    .audit-content {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .form-row {
      grid-template-columns: 1fr;
    }

    .quote {
      font-size: 1.25rem;
    }

    /* Mobile form adjustments */
    .audit-form,
    .contact-form {
      padding: var(--spacing6);
    }

    .form-group {
      margin-bottom: var(--spacing4);
    }

    .form-row {
      margin-bottom: var(--spacing4);
    }

    .form-input,
    .form-select,
    .form-textarea {
      font-size: 16px; /* Prevents zoom on iOS */
    }
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .btn,
    .method-card,
    .service-card {
      transition: none;
    }
    
    .btn:hover,
    .method-card:hover {
      transform: none;
    }
  }

  /* High Contrast Mode */
  @media (prefers-contrast: high) {
    .btn {
      border-width: 3px;
    }
    
    .service-card,
    .method-card {
      border-width: 2px;
    }
  }
</style>

<script>
  // Simplified Contact Page Controller
  class ContactPageManager {
    constructor() {
      this.auditForm = document.querySelector('form[name="website-audit"]');
      this.contactForm = document.querySelector('form[name="contact"]');
      this.init();
    }

    init() {
      this.setupSmoothScrolling();
      this.setupFormValidation();
      this.setupFormSubmission();
    }

    setupSmoothScrolling() {
      // Smooth scroll to form sections
      const ctaButtons = document.querySelectorAll('a[href^="#"]');
      ctaButtons.forEach(button => {
        button.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = button.getAttribute('href').substring(1);
          const targetElement = document.getElementById(targetId);
          
          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
    }

    setupFormValidation() {
      [this.auditForm, this.contactForm].forEach(form => {
        if (!form) return;

        const inputs = form.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
          input.addEventListener('blur', () => this.validateField(input));
          input.addEventListener('input', () => this.clearFieldError(input));
        });
      });
    }

    validateField(field) {
      const isValid = field.checkValidity();
      
      if (!isValid) {
        this.showFieldError(field);
      } else {
        this.hideFieldError(field);
      }
      
      return isValid;
    }

    showFieldError(field) {
      let errorElement = field.parentNode.querySelector('.field-error');
      
      if (!errorElement) {
        errorElement = document.createElement('div');
        errorElement.className = 'field-error';
        errorElement.style.cssText = `
          color: #dc2626;
          font-size: 0.875rem;
          margin-top: 4px;
        `;
        field.parentNode.appendChild(errorElement);
      }
      
      if (field.validity.valueMissing) {
        errorElement.textContent = 'This field is required';
      } else if (field.validity.typeMismatch) {
        errorElement.textContent = field.type === 'email' ? 'Please enter a valid email address' : 'Please enter a valid URL';
      } else {
        errorElement.textContent = 'Please check this field';
      }
    }

    hideFieldError(field) {
      const errorElement = field.parentNode.querySelector('.field-error');
      if (errorElement) {
        errorElement.remove();
      }
    }

    clearFieldError(field) {
      this.hideFieldError(field);
    }

    setupFormSubmission() {
      [this.auditForm, this.contactForm].forEach(form => {
        if (!form) return;

        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          
          if (this.validateForm(form)) {
            await this.submitForm(form);
          }
        });
      });
    }

    validateForm(form) {
      const requiredFields = form.querySelectorAll('[required]');
      let isValid = true;
      
      requiredFields.forEach(field => {
        if (!this.validateField(field)) {
          isValid = false;
        }
      });
      
      return isValid;
    }

    async submitForm(form) {
      const submitButton = form.querySelector('button[type="submit"]');
      const originalText = submitButton.textContent;
      
      // Check reCAPTCHA
      const recaptchaResponse = grecaptcha.getResponse();
      if (!recaptchaResponse) {
        this.showErrorMessage('Please complete the reCAPTCHA verification.');
        return;
      }
      
      // Update button state
      submitButton.disabled = true;
      submitButton.textContent = 'Sending...';
      
      try {
        const formData = new FormData(form);
        formData.append('g-recaptcha-response', recaptchaResponse);
        
        const response = await fetch(form.action, {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          this.showSuccessMessage(form);
          this.trackFormSubmission(form);
          // Reset reCAPTCHA
          grecaptcha.reset();
        } else {
          throw new Error('Form submission failed');
        }
      } catch (error) {
        console.error('Form submission error:', error);
        this.showErrorMessage('Sorry, there was an error sending your message. Please try again.');
        // Reset reCAPTCHA on error
        grecaptcha.reset();
      } finally {
        submitButton.disabled = false;
        submitButton.textContent = originalText;
      }
    }

    showSuccessMessage(form) {
      const isAuditForm = form.name === 'website-audit';
      const message = isAuditForm 
        ? 'Thank you! We\'ll email your website audit report within 48 hours.'
        : 'Thank you! We\'ll respond to your inquiry within 24 hours.';

      // Create success message
      const successDiv = document.createElement('div');
      successDiv.style.cssText = `
        background: #10B981;
        color: white;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        margin-top: 20px;
        font-weight: 600;
      `;
      successDiv.textContent = message;

      // Replace form with success message
      form.style.display = 'none';
      form.parentNode.appendChild(successDiv);

      // Scroll to success message
      successDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    showErrorMessage(message = 'Sorry, there was an error sending your message. Please try again or contact us directly.') {
      const errorDiv = document.createElement('div');
      errorDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #dc2626;
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        z-index: 1000;
        max-width: 400px;
      `;
      errorDiv.textContent = message;
      
      document.body.appendChild(errorDiv);
      
      setTimeout(() => {
        errorDiv.remove();
      }, 5000);
    }

    trackFormSubmission(form) {
      const formType = form.name;
      const formData = new FormData(form);
      
      console.log(`${formType} form submitted:`, {
        type: formType,
        timestamp: new Date().toISOString()
      });
      
      // Google Analytics tracking if available
      if (typeof gtag !== 'undefined') {
        gtag('event', 'form_submit', {
          event_category: 'Contact',
          event_label: formType,
          value: 1
        });
      }
    }
  }

  // Initialize when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    new ContactPageManager();
  });
</script>