---
// HeroSection.astro
import theme from '../../lib/theme';

// Component props with defaults
export interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  ctaText?: string;
  ctaHref?: string;
  images?: Array<{
    src: string;
    alt: string;
    width?: number;
    height?: number;
  }>;
}

const {
  title = "Strategy. Clarity. Results.",
  subtitle = "",
  description = "From ambitious startups to established enterprises, we collaborate with leaders to solve complex challenges, shape focused strategies, and build operational systems that scale.",
  ctaText = "Our Services",
  ctaHref = "/services",
  images = [
    {
      src: "/framer1.avif",
      alt: "Modern collaborative workspace with team members brainstorming creative solutions",
      width: 400,
      height: 300
    },
    {
      src: "/framer1.avif", 
      alt: "Professional team meeting discussing strategic business plans",
      width: 400,
      height: 300
    },
    {
      src: "/framer1.avif",
      alt: "Business presentation showing data visualization and growth metrics",
      width: 400,
      height: 300
    },
    {
      src: "/framer1.avif",
      alt: "Team members collaborating on project planning with sticky notes and diagrams",
      width: 400,
      height: 300
    }
  ]
} = Astro.props;

// Generate breadcrumb structured data for SEO
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "/"
    },
    {
      "@type": "ListItem", 
      "position": 2,
      "name": "About Us",
      "item": "/about"
    }
  ]
};
---

<section 
  class="hero-section"
  aria-labelledby="hero-title"
  role="banner"
>
  <!-- Skip link for keyboard navigation -->
  <a 
    href="#main-content" 
    class="skip-link"
    aria-label="Skip to main content"
  >
    Skip to main content
  </a>

  <div class="hero-container">
    <!-- Breadcrumb Navigation -->
    <nav 
      aria-label="Breadcrumb navigation"
      class="breadcrumb-nav"
      role="navigation"
    >
      <ol class="breadcrumb-list">
        <li class="breadcrumb-item">
          <a 
            href="/"
            class="breadcrumb-link"
            aria-label="Navigate to home page"
          >
            Home
          </a>
        </li>
        <li class="breadcrumb-separator" aria-hidden="true">›</li>
        <li 
          class="breadcrumb-item current"
          aria-current="page"
        >
          About Us
        </li>
      </ol>
    </nav>

    <!-- Main Hero Content -->
    <div class="hero-content">
      <header class="hero-text">
        {subtitle && (
          <p class="hero-subtitle" role="doc-subtitle">
            {subtitle}
          </p>
        )}
        
        <h1 
          id="hero-title"
          class="hero-title"
        >
          {title}
        </h1>
        
        <p class="hero-description">
          {description}
        </p>
        
        <div class="hero-cta">
          <a 
            href={ctaHref}
            class="cta-button"
            role="button"
            aria-describedby="hero-description"
          >
            <span class="cta-text">{ctaText}</span>
            <span class="cta-icon" aria-hidden="true">→</span>
            <span class="sr-only">Learn more about our services</span>
          </a>
        </div>
      </header>

      <!-- Image Gallery with proper accessibility -->
      <div 
        class="hero-images"
        role="img"
        aria-labelledby="image-gallery-label"
      >
        <h2 id="image-gallery-label" class="sr-only">
          Visual showcase of our collaborative work environment
        </h2>
        
        <div class="image-grid">
          {images.map((image, index) => (
            <div 
              class={`image-wrapper image-${index + 1}`}
              key={index}
            >
              <img
                src={image.src}
                alt={image.alt}
                width={image.width || 400}
                height={image.height || 300}
                loading={index < 2 ? "eager" : "lazy"}
                decoding="async"
                class="hero-image"
              />
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>

  <!-- Structured Data -->
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)}></script>
</section>

<style define:vars={{
  primary500: theme.colors.primary[500],
  primary600: theme.colors.primary[600],
  primary700: theme.colors.primary[700],
  neutral50: theme.colors.neutral[50],
  neutral100: theme.colors.neutral[100],
  neutral400: theme.colors.neutral[400],
  neutral500: theme.colors.neutral[500],
  neutral600: theme.colors.neutral[600],
  neutral700: theme.colors.neutral[700],
  neutral800: theme.colors.neutral[800],
  neutral900: theme.colors.neutral[900],
  fontSansSerif: theme.typography.fontFamily.sans.join(', '),
  fontDisplay: theme.typography.fontFamily.display.join(', '),
  touchTargetMin: theme.accessibility.touchTarget.min,
  focusColor: theme.accessibility.focus.color,
  focusWidth: theme.accessibility.focus.width,
  focusOffset: theme.accessibility.focus.offset,
  shadowMd: theme.boxShadow.md,
  shadowLg: theme.boxShadow.lg,
  spacingBase: theme.spacing[4],
  spacingLg: theme.spacing[6],
  spacingXl: theme.spacing[8],
  spacing2xl: theme.spacing[12],
  borderRadiusLg: theme.borderRadius.lg,
  borderRadiusXl: theme.borderRadius.xl
}}>

/* Skip link for accessibility */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--neutral900);
  color: white;
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
  font-weight: 600;
  transition: top 0.3s ease;
}

.skip-link:focus {
  top: 6px;
  outline: var(--focusWidth) solid var(--focusColor);
  outline-offset: var(--focusOffset);
}

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Main hero section */
.hero-section {
  position: relative;
  background-color: var(--neutral50);
  min-height: 100vh;
  display: flex;
  align-items: center;
  padding: var(--spacing2xl) 0;
}

.hero-container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 var(--spacingBase);
  width: 100%;
}

/* Breadcrumb Navigation */
.breadcrumb-nav {
  margin-bottom: var(--spacingLg);
}

.breadcrumb-list {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.875rem;
  color: var(--neutral600);
}

.breadcrumb-item {
  display: flex;
  align-items: center;
}

.breadcrumb-link {
  color: var(--neutral600);
  text-decoration: none;
  padding: 0.5rem;
  border-radius: 4px;
  transition: color 0.2s ease, background-color 0.2s ease;
  min-height: var(--touchTargetMin);
  display: flex;
  align-items: center;
}

.breadcrumb-link:hover {
  color: var(--primary600);
  background-color: var(--neutral100);
}

.breadcrumb-link:focus {
  outline: var(--focusWidth) solid var(--focusColor);
  outline-offset: var(--focusOffset);
  color: var(--primary600);
}

.breadcrumb-separator {
  margin: 0 0.5rem;
  font-size: 0.75rem;
  opacity: 0.6;
}

.breadcrumb-item.current {
  color: var(--neutral500);
  font-weight: 500;
}

/* Hero Content Layout */
.hero-content {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacing2xl);
  align-items: center;
}

@media (min-width: 1024px) {
  .hero-content {
    grid-template-columns: 1fr 1.2fr;
    gap: 4rem;
  }
}

/* Hero Text Content */
.hero-text {
  max-width: 600px;
}

.hero-subtitle {
  font-size: 1rem;
  font-weight: 500;
  color: var(--primary600);
  margin-bottom: 1rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.hero-title {
  font-family: var(--fontDisplay);
  font-size: 2.5rem;
  font-weight: 800;
  line-height: 1.2;
  color: var(--neutral900);
  margin-bottom: 1.5rem;
  letter-spacing: -0.025em;
}

@media (min-width: 768px) {
  .hero-title {
    font-size: 3.25rem;
  }
}

@media (min-width: 1024px) {
  .hero-title {
    font-size: 3.75rem;
  }
}

.hero-description {
  font-family: var(--fontSansSerif);
  font-size: 1.125rem;
  line-height: 1.7;
  color: var(--neutral700);
  margin-bottom: 2.5rem;
  max-width: 65ch; /* Optimal reading width */
}

/* Call to Action Button */
.hero-cta {
  display: flex;
}

.cta-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  background-color: var(--neutral900);
  color: white;
  font-family: var(--fontSansSerif);
  font-size: 1rem;
  font-weight: 600;
  text-decoration: none;
  padding: 1rem 2rem;
  border-radius: var(--borderRadiusLg);
  min-height: var(--touchTargetMin);
  transition: all 0.2s ease;
  box-shadow: var(--shadowMd);
  position: relative;
  overflow: hidden;
}

.cta-button:hover {
  background-color: var(--primary600);
  box-shadow: var(--shadowLg);
  transform: translateY(-2px);
}

.cta-button:focus {
  outline: var(--focusWidth) solid var(--focusColor);
  outline-offset: var(--focusOffset);
}

.cta-button:active {
  transform: translateY(0);
  box-shadow: var(--shadowMd);
}

.cta-text {
  position: relative;
  z-index: 1;
}

.cta-icon {
  font-size: 1.25rem;
  transition: transform 0.2s ease;
  position: relative;
  z-index: 1;
}

.cta-button:hover .cta-icon {
  transform: translateX(4px);
}

/* Image Gallery */
.hero-images {
  position: relative;
}

.image-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  max-width: 600px;
}

@media (min-width: 768px) {
  .image-grid {
    gap: 1.5rem;
  }
}

.image-wrapper {
  position: relative;
  border-radius: var(--borderRadiusXl);
  overflow: hidden;
  box-shadow: var(--shadowMd);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.image-wrapper:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadowLg);
}

.hero-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transition: transform 0.3s ease;
}

.image-wrapper:hover .hero-image {
  transform: scale(1.05);
}

/* Specific positioning for image grid */
.image-1 {
  grid-column: 1;
  grid-row: 1;
  margin-top: 2rem;
}

.image-2 {
  grid-column: 2;
  grid-row: 1;
}

.image-3 {
  grid-column: 1;
  grid-row: 2;
}

.image-4 {
  grid-column: 2;
  grid-row: 2;
  margin-top: 2rem;
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .cta-button,
  .image-wrapper,
  .hero-image,
  .cta-icon,
  .breadcrumb-link {
    transition: none;
  }
  
  .image-wrapper:hover,
  .cta-button:hover {
    transform: none;
  }
  
  .cta-button:hover .cta-icon {
    transform: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .hero-title,
  .hero-description {
    color: var(--neutral900);
  }
  
  .cta-button {
    border: 2px solid var(--neutral900);
  }
  
  .breadcrumb-link:focus,
  .cta-button:focus {
    outline: 3px solid;
  }
}

/* Focus visible for modern browsers */
.cta-button:focus-visible {
  outline: var(--focusWidth) solid var(--focusColor);
  outline-offset: var(--focusOffset);
}

.breadcrumb-link:focus-visible {
  outline: var(--focusWidth) solid var(--focusColor);
  outline-offset: var(--focusOffset);
}

/* Print styles */
@media print {
  .hero-section {
    min-height: auto;
    padding: 2rem 0;
  }
  
  .skip-link,
  .cta-button {
    display: none;
  }
  
  .hero-images {
    display: none;
  }
  
  .hero-content {
    grid-template-columns: 1fr;
  }
}

</style>